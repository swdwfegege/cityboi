<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEXUS HUB</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root {
    --cyan: #00f5ff;
    --blue: #0066ff;
    --dark: #020812;
    --grid: rgba(0,245,255,0.04);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--dark);
    color: var(--cyan);
    font-family: 'Share Tech Mono', monospace;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    padding: 40px 20px;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(var(--grid) 1px, transparent 1px),
      linear-gradient(90deg, var(--grid) 1px, transparent 1px);
    background-size: 40px 40px;
    animation: gridShift 20s linear infinite;
    pointer-events: none;
    z-index: 0;
  }

  @keyframes gridShift {
    0% { background-position: 0 0; }
    100% { background-position: 40px 40px; }
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.08) 2px, rgba(0,0,0,0.08) 4px);
    pointer-events: none;
    z-index: 10;
  }

  .hub {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 5;
    width: 100%;
    max-width: 800px;
  }

  .header {
    text-align: center;
    margin-bottom: 48px;
  }

  .header-label {
    font-size: 11px;
    letter-spacing: 6px;
    color: rgba(0,245,255,0.4);
    text-transform: uppercase;
    margin-bottom: 8px;
    animation: fadeIn 1s ease both;
  }

  .header-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(28px, 5vw, 52px);
    font-weight: 900;
    letter-spacing: 12px;
    text-transform: uppercase;
    background: linear-gradient(135deg, #00f5ff, #0066ff, #00f5ff);
    background-size: 200% auto;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: shimmer 3s linear infinite, fadeIn 1s ease both;
    filter: drop-shadow(0 0 20px rgba(0,245,255,0.4));
  }

  @keyframes shimmer {
    0% { background-position: 0% center; }
    100% { background-position: 200% center; }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .status-bar {
    display: flex;
    gap: 24px;
    margin-bottom: 60px;
    animation: fadeIn 1s ease 0.2s both;
  }

  .status-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    letter-spacing: 2px;
    color: rgba(0,245,255,0.5);
  }

  .status-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--cyan);
    animation: blink 2s ease infinite;
  }
  .status-dot.orange { background: #ff6600; animation-delay: 0.5s; }
  .status-dot.green  { background: #00ff88; animation-delay: 1s; }

  @keyframes blink {
    0%,100% { opacity:1; box-shadow: 0 0 8px currentColor; }
    50%      { opacity:0.3; box-shadow: none; }
  }

  .button-cluster {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    animation: fadeIn 1s ease 0.4s both;
  }

  .ring-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
    width: 320px; height: 320px;
  }

  .ring {
    position: absolute;
    border-radius: 50%;
    border: 1px solid rgba(0,245,255,0.15);
    animation: ringRotate var(--dur) linear infinite;
  }
  .ring:nth-child(1) { width:220px; height:220px; --dur:12s; border-color:rgba(0,245,255,0.2); }
  .ring:nth-child(2) { width:270px; height:270px; --dur:20s; animation-direction:reverse; border-style:dashed; }
  .ring:nth-child(3) { width:318px; height:318px; --dur:30s; border-color:rgba(0,102,255,0.2); }

  .ring::before {
    content:'';
    position:absolute;
    width:6px; height:6px;
    background:var(--cyan);
    border-radius:50%;
    top:-3px; left:50%;
    transform:translateX(-50%);
    box-shadow:0 0 10px var(--cyan);
  }

  @keyframes ringRotate {
    from { transform:rotate(0deg); }
    to   { transform:rotate(360deg); }
  }

  .btn-nexus {
    position: relative;
    width:160px; height:160px;
    border-radius:50%;
    border:none;
    background:radial-gradient(circle at 40% 35%, #0a2040, #020812);
    cursor:pointer;
    font-family:'Orbitron',sans-serif;
    font-weight:900;
    font-size:18px;
    letter-spacing:3px;
    color:var(--cyan);
    text-transform:uppercase;
    outline:none;
    transition:transform 0.15s ease;
    box-shadow:0 0 0 2px rgba(0,245,255,0.3), 0 0 30px rgba(0,245,255,0.2), inset 0 0 30px rgba(0,0,0,0.5);
    z-index:2;
  }

  .btn-nexus::before {
    content:'';
    position:absolute;
    inset:-3px;
    border-radius:50%;
    background:conic-gradient(from 0deg, var(--cyan), var(--blue), var(--cyan));
    z-index:-1;
    animation:spinGlow 4s linear infinite;
    opacity:0.7;
    filter:blur(2px);
  }

  @keyframes spinGlow {
    from { transform:rotate(0deg); }
    to   { transform:rotate(360deg); }
  }

  .btn-nexus:hover {
    transform:scale(1.05);
    color:#fff;
    box-shadow:0 0 0 2px rgba(0,245,255,0.6), 0 0 60px rgba(0,245,255,0.4), 0 0 120px rgba(0,102,255,0.3), inset 0 0 30px rgba(0,245,255,0.1);
  }
  .btn-nexus:active { transform:scale(0.97); }
  .btn-nexus.activated { animation:activate 0.6s ease; }

  @keyframes activate {
    0%   { box-shadow:0 0 0 2px rgba(0,245,255,0.6), 0 0 60px rgba(0,245,255,0.4); }
    50%  { box-shadow:0 0 0 30px rgba(0,245,255,0), 0 0 150px rgba(0,245,255,0.8), 0 0 300px rgba(0,102,255,0.6); }
    100% { box-shadow:0 0 0 2px rgba(0,245,255,0.6), 0 0 60px rgba(0,245,255,0.4); }
  }

  .sub-buttons {
    display:flex;
    gap:12px;
    margin-top:8px;
  }

  .btn-sub {
    padding:10px 20px;
    background:transparent;
    border:1px solid rgba(0,245,255,0.25);
    color:rgba(0,245,255,0.6);
    font-family:'Share Tech Mono',monospace;
    font-size:11px;
    letter-spacing:3px;
    text-transform:uppercase;
    cursor:pointer;
    transition:all 0.2s ease;
    clip-path:polygon(8px 0%,100% 0%,calc(100% - 8px) 100%,0% 100%);
  }

  .btn-sub:hover {
    background:rgba(0,245,255,0.08);
    border-color:var(--cyan);
    color:var(--cyan);
    box-shadow:0 0 20px rgba(0,245,255,0.2);
    text-shadow:0 0 10px var(--cyan);
  }
  .btn-sub:active { transform:scale(0.97); }

  /* Lower section: terminal + updates side by side */
  .lower-section {
    display:flex;
    gap:20px;
    margin-top:48px;
    width:100%;
    max-width:760px;
    animation:fadeIn 1s ease 0.6s both;
    align-items:flex-start;
  }

  .console {
    flex:1;
    min-width:0;
    background:rgba(0,8,20,0.8);
    border:1px solid rgba(0,245,255,0.15);
    padding:12px 16px;
    font-size:11px;
    line-height:1.8;
    color:rgba(0,245,255,0.5);
    clip-path:polygon(0 0,calc(100% - 16px) 0,100% 16px,100% 100%,0 100%);
    max-height:200px;
    overflow-y:auto;
  }

  .console::before {
    content:'// NEXUS TERMINAL';
    display:block;
    color:rgba(0,245,255,0.3);
    margin-bottom:6px;
    letter-spacing:2px;
  }

  .console-line {
    opacity:0;
    transform:translateX(-4px);
    animation:lineIn 0.3s ease forwards;
  }

  @keyframes lineIn {
    to { opacity:1; transform:translateX(0); }
  }

  .log-active { color:var(--cyan); }
  .log-warn   { color:#ff6600; }
  .log-ok     { color:#00ff88; }

  /* Updates panel */
  .updates-panel {
    flex:1;
    min-width:0;
    background:rgba(0,8,20,0.8);
    border:1px solid rgba(0,245,255,0.15);
    padding:12px 16px;
    font-size:11px;
    clip-path:polygon(16px 0,100% 0,100% 100%,0 100%,0 16px);
  }

  .updates-header {
    color:rgba(0,245,255,0.3);
    letter-spacing:2px;
    margin-bottom:10px;
    display:flex;
    align-items:center;
    justify-content:space-between;
  }

  .updates-header span {
    color:rgba(0,245,255,0.5);
    font-size:10px;
  }

  .updates-list {
    list-style:none;
    max-height:120px;
    overflow-y:auto;
    margin-bottom:10px;
  }

  .updates-list::-webkit-scrollbar { width:3px; }
  .updates-list::-webkit-scrollbar-thumb { background:rgba(0,245,255,0.3); }

  .update-item {
    display:flex;
    align-items:flex-start;
    gap:8px;
    padding:5px 0;
    border-bottom:1px solid rgba(0,245,255,0.06);
    color:rgba(0,245,255,0.7);
    line-height:1.5;
    animation:lineIn 0.3s ease forwards;
  }
  .update-item:last-child { border-bottom:none; }

  .update-bullet { color:var(--cyan); flex-shrink:0; margin-top:1px; }
  .update-text   { flex:1; word-break:break-word; }
  .update-time   { font-size:9px; color:rgba(0,245,255,0.3); flex-shrink:0; margin-top:2px; }

  .update-delete {
    background:none; border:none;
    color:rgba(255,50,50,0.4);
    cursor:pointer; font-size:10px;
    padding:0 2px; flex-shrink:0;
    transition:color 0.2s;
  }
  .update-delete:hover { color:rgba(255,50,50,0.9); }

  .update-input-row { display:flex; gap:6px; }

  .update-input {
    flex:1;
    background:rgba(0,245,255,0.04);
    border:1px solid rgba(0,245,255,0.2);
    color:var(--cyan);
    font-family:'Share Tech Mono',monospace;
    font-size:11px;
    padding:7px 10px;
    outline:none;
    transition:border-color 0.2s;
    letter-spacing:1px;
  }
  .update-input::placeholder { color:rgba(0,245,255,0.25); }
  .update-input:focus { border-color:rgba(0,245,255,0.5); background:rgba(0,245,255,0.07); }

  .update-submit {
    background:rgba(0,245,255,0.08);
    border:1px solid rgba(0,245,255,0.3);
    color:var(--cyan);
    font-family:'Share Tech Mono',monospace;
    font-size:11px;
    letter-spacing:2px;
    padding:7px 12px;
    cursor:pointer;
    text-transform:uppercase;
    transition:all 0.2s;
    clip-path:polygon(6px 0,100% 0,calc(100% - 6px) 100%,0 100%);
  }
  .update-submit:hover {
    background:rgba(0,245,255,0.15);
    border-color:var(--cyan);
    box-shadow:0 0 15px rgba(0,245,255,0.2);
  }

  .no-updates {
    color:rgba(0,245,255,0.2);
    font-style:italic;
    padding:8px 0;
    text-align:center;
  }

  /* Corners */
  .corner { position:fixed; width:60px; height:60px; opacity:0.4; }
  .corner-tl { top:20px; left:20px;  border-top:1px solid var(--cyan); border-left:1px solid var(--cyan); }
  .corner-tr { top:20px; right:20px; border-top:1px solid var(--cyan); border-right:1px solid var(--cyan); }
  .corner-bl { bottom:20px; left:20px;  border-bottom:1px solid var(--cyan); border-left:1px solid var(--cyan); }
  .corner-br { bottom:20px; right:20px; border-bottom:1px solid var(--cyan); border-right:1px solid var(--cyan); }

  .ripple {
    position:fixed; border-radius:50%;
    border:1px solid rgba(0,245,255,0.5);
    pointer-events:none;
    animation:rippleOut 1s ease-out forwards;
    transform:translate(-50%,-50%);
    z-index:20;
  }
  @keyframes rippleOut {
    from { width:0; height:0; opacity:1; }
    to   { width:400px; height:400px; opacity:0; }
  }

  .console::-webkit-scrollbar { width:3px; }
  .console::-webkit-scrollbar-thumb { background:rgba(0,245,255,0.3); }
</style>
</head>
<body>

<div class="corner corner-tl"></div>
<div class="corner corner-tr"></div>
<div class="corner corner-bl"></div>
<div class="corner corner-br"></div>

<div class="hub">
  <div class="header">
    <div class="header-label">system v4.2.1 — online</div>
    <div class="header-title">NEXUS HUB</div>
  </div>

  <div class="status-bar">
    <div class="status-item"><span class="status-dot green"></span>SYS ACTIVE</div>
    <div class="status-item"><span class="status-dot orange"></span>NET RELAY</div>
    <div class="status-item"><span class="status-dot"></span>UPLINK</div>
  </div>

  <div class="button-cluster">
    <div class="ring-container">
      <div class="ring"></div>
      <div class="ring"></div>
      <div class="ring"></div>
      <button class="btn-nexus" id="nexusBtn" onclick="triggerNexus(event)">NEXUS</button>
    </div>
    <div class="sub-buttons">
      <button class="btn-sub" onclick="triggerSub(event,'NEXUS TEST SITE')">nexus test site</button>
      <button class="btn-sub" onclick="triggerSub(event,'WATER')">water</button>
    </div>
  </div>

  <div class="lower-section">
    <div class="console" id="console">
      <div class="console-line log-ok" style="animation-delay:0.8s">» NODE INITIALIZED</div>
      <div class="console-line" style="animation-delay:1.1s">» AWAITING INPUT...</div>
    </div>

    <div class="updates-panel">
      <div class="updates-header">
        // UPDATES LOG
        <span id="updateCount">0 ENTRIES</span>
      </div>
      <ul class="updates-list" id="updatesList">
        <li class="no-updates">no updates yet</li>
      </ul>
      <div class="update-input-row">
        <input class="update-input" id="updateInput" type="text"
          placeholder="type update..." maxlength="120"
          onkeydown="if(event.key==='Enter') addUpdate()" />
        <button class="update-submit" onclick="addUpdate()">POST</button>
      </div>
    </div>
  </div>
</div>

<script>
  const console_el  = document.getElementById('console');
  const nexusBtn    = document.getElementById('nexusBtn');
  const updatesList = document.getElementById('updatesList');
  const updateInput = document.getElementById('updateInput');
  const updateCount = document.getElementById('updateCount');
  let updates = [];

  /* ---- Logging ---- */
  function addLog(text, cls='') {
    const line = document.createElement('div');
    line.className = 'console-line ' + cls;
    line.style.animationDelay = '0s';
    line.textContent = '» ' + text;
    console_el.appendChild(line);
    const lines = console_el.querySelectorAll('.console-line');
    if (lines.length > 10) lines[0].remove();
    console_el.scrollTop = console_el.scrollHeight;
  }

  /* ---- Ripple ---- */
  function createRipple(e) {
    const r = document.createElement('div');
    r.className = 'ripple';
    r.style.left = e.clientX + 'px';
    r.style.top  = e.clientY + 'px';
    document.body.appendChild(r);
    setTimeout(() => r.remove(), 1000);
  }

  /* ---- Open in about:blank tab via iframe ---- */
  function openInAboutBlank(url) {
    const w = window.open('about:blank', '_blank');
    if (w) {
      w.document.write('<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>about:blank</title><style>body{margin:0;overflow:hidden;}iframe{width:100vw;height:100vh;border:none;}</style></head><body><iframe src="' + url + '" frameborder="0"></iframe></body></html>');
      w.document.close();
    } else {
      alert('Failed to open new window. Please allow pop-ups for this site.');
    }
  }

  /* ---- Button handlers ---- */
  function triggerNexus(e) {
    createRipple(e);
    nexusBtn.classList.remove('activated');
    void nexusBtn.offsetWidth;
    nexusBtn.classList.add('activated');
    addLog('NEXUS CORE ENGAGED', 'log-active');
    addLog('ROUTING PROTOCOL... OK', 'log-ok');
    setTimeout(() => {
      addLog('NEXUS ONLINE ✓', 'log-ok');
      openInAboutBlank('https://swdwfegege.github.io/epic-chat-bot/');
    }, 300);
  }

  function triggerSub(e, label) {
    createRipple(e);
    const configs = {
      'NEXUS TEST SITE': {
        url: 'https://hs9vtm.csb.app/',
        msgs: ['LOADING TEST ENV...', 'SANDBOX ACTIVE', 'TEST NODE READY ✓']
      },
      'WATER': {
        url: 'https://cgxlyxnlynjpbmdiywnrc3rhcnrtewvkdwnhdglvbml0d2fzc29sawdtv2.familyguy.in/signin.html',
        msgs: ['H₂O MODULE INIT', 'HYDRO LINK ESTABLISHED', 'FLOW STATE: OPTIMAL ✓']
      }
    };
    const cfg = configs[label];
    addLog(label + ' SELECTED', 'log-warn');
    cfg.msgs.forEach((l, i) => {
      setTimeout(() => {
        addLog(l, i === cfg.msgs.length - 1 ? 'log-ok' : '');
        if (i === cfg.msgs.length - 1) openInAboutBlank(cfg.url);
      }, (i + 1) * 300);
    });
  }

  /* ---- Updates ---- */
  function getNow() {
    return new Date().toLocaleTimeString([], { hour:'2-digit', minute:'2-digit' });
  }

  function escapeHtml(s) {
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  function renderUpdates() {
    updatesList.innerHTML = '';
    if (updates.length === 0) {
      updatesList.innerHTML = '<li class="no-updates">no updates yet</li>';
      updateCount.textContent = '0 ENTRIES';
      return;
    }
    updateCount.textContent = updates.length + ' ENTR' + (updates.length === 1 ? 'Y' : 'IES');
    updates.forEach((u, idx) => {
      const li = document.createElement('li');
      li.className = 'update-item';
      li.innerHTML =
        '<span class="update-bullet">›</span>' +
        '<span class="update-text">' + escapeHtml(u.text) + '</span>' +
        '<span class="update-time">' + u.time + '</span>' +
        '<button class="update-delete" onclick="deleteUpdate(' + idx + ')" title="remove">✕</button>';
      updatesList.appendChild(li);
    });
    updatesList.scrollTop = updatesList.scrollHeight;
  }

  function addUpdate() {
    const val = updateInput.value.trim();
    if (!val) return;
    updates.push({ text: val, time: getNow() });
    updateInput.value = '';
    renderUpdates();
    addLog('UPDATE POSTED', 'log-ok');
  }

  function deleteUpdate(idx) {
    updates.splice(idx, 1);
    renderUpdates();
  }
</script>
</body>
</html>
